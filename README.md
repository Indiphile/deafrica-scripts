<h1 align="center">
  Deafrica Scripts
</h1>

## üíª Technologies

- [PYTHON 3.9](https://www.python.org/downloads/release/python-390/)
- [Docker](https://www.docker.com/)
- [GDAL](https://gdal.org/)
- [Boto3](https://github.com/boto/boto3)
- [rio-cogeo](https://github.com/cogeotiff/rio-cogeo)

## üìù Description

Scripts for the Digital Earth Africa project which provide utilities and solutions for data acquisition and monitoring functions to assist with data validation and quality assurance.

### Utilities

Various resources are included with the following structures:

- **deafrica/data**: data acquisition and processing utilities
- **deafrica/monitoring**: data monitoring and reporting utilities
- **scripts**: Miscellaneous utilities and sample notebooks

#### Data Acquisition

Data acquisition scripts are available for the following resources:

- **[ALOS PALSAR](https://global.jaxa.jp/projects/sat/alos/index.html)**: Advanced Land Observation Satellite Phased Array type L-band Synthetic Aperture Radar

- **[CHIRPS](https://www.chc.ucsb.edu/data/chirps)**: Climate Hazards Group InfraRed Precipitation with Station data

- **[Copernicus GLS](https://zenodo.org/record/3939038)**: Copernicus Global Land Service Land Cover 100m

- **[Copernicus CCI](https://cds.climate.copernicus.eu/cdsapp#!/dataset/satellite-land-cover?tab=form)**: 300m Land Cover Classification ESA Climate Change Initiative, Copernicus

- **[GMW](https://data.unep-wcmc.org/datasets/45)**: Script generates mangrove extents mapped by Global Mangrove Watch over Africa in cloud optimized rasters at 0.001 0.001 spatial resolution.

#### Monitoring

The following elements outline available monitoring utilities and their functions:

- **Check dead queues**: Monitor DEAfrica dead queues, with an option of Slack alert.
- **Landsat gap filler** : Transfer scenes that are missing in DEAfrica from USGS S3 bucket. A list of missing scenes is generated by the gap report process and used to fill gaps.
- **Landsat gap Report**: Check differences across satellites Landsat 8, 7, and 5 between USGS bulk file and DEAfrica's inventory bucket. As per result, gap report will generate a JSON file within a list of missing and orphan scenes.
- **Sentinel 2 gap filler**: Transfer scenes that are missing in DEAfrica from Element-84 inventory bucket. A list of missing scenes is generated by the gap report process and used to fill those gaps.
- **Sentinel 2 gap Report**: Check differences between Element-84 inventory bucket and DEAfrica's inventory bucket. As per result, gap report will generate a JSON file within a list of missing and orphan scenes.

## ‚öôÔ∏è Setup & Run

Clone the main project repository from Github.

```shell
$ git clone https://github.com/digitalearthafrica/deafrica-scripts.git
```

## Building locally

```shell
$ cd deafrica-scripts
$ docker build -t Deafrica-Scripts
```

## Download Image from the repository

```shell
$ docker pull digitalearthafrica/deafrica-tools
```

## Local Development

Local installation and development will require development dependencies `requirements.txt`.

From the project root directory, use pip to install dependencies as follows:

```shell
$ pip install -r requirements.txt
$ pip install -e .
```

## üìù Tests

Running tests will require development dependencies `requirements-test.txt`.

From the project root directory, use pip to install test dependencies as follows:

```shell
$ pip install -r requirements-test.txt
$ pytest .
```

## ‚öôÔ∏è GitHub Actions

Any changes pulled to any branch will be tested and have the formation checked by black.

A Merge will result in the creation of a new test image on Docker and 45 min later replicated on our AWS ECS.

##

Copyright **Deafrica** - [GitHub](https://github.com/digitalearthafrica)
Developed by **Rodrigo de Azevedo Carvalho** - [Linkedin](www.linkedin.com/in/rodrigo-de-azevedo-carvalho) - [GitHub](https://github.com/carioca-au)
